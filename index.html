<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-device-width, initial-scale=1.0">
    <title>Accueil - Monsieur Minutieux</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- Three.js library for 3D visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- OrbitControls for interactive camera movement -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Styling for the 3D container and canvas */
        #3d-container {
            position: relative; /* Needed for positioning the overlay text */
        }
        #3d-container canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        /* Fade-out animation for the interaction hint */
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .fade-out {
            animation: fadeOut 2s ease-in-out 3s forwards;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Conteneur principal -->
    <div class="container mx-auto p-4 md:p-8">

        <!-- En-tête -->
        <header class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl md:text-4xl font-black text-gray-900">Monsieur Minutieux</h1>
                    <p class="text-gray-500">Créations sur mesure | Ingénierie & Design</p>
                </div>
                <!-- Navigation pour bureau -->
                <nav id="desktop-nav" class="hidden md:flex items-center space-x-2">
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition-colors">Projets</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition-colors">Services</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md transition-colors">Contact</a>
                </nav>
                <!-- Bouton du menu mobile -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-900 focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
            <!-- Menu mobile (caché par défaut) -->
            <div id="mobile-menu" class="hidden md:hidden mt-4">
                <a href="#" class="block text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md">Projets</a>
                <a href="#" class="block text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md">Services</a>
                <a href="#" class="block text-gray-600 hover:bg-gray-100 px-3 py-2 rounded-md">Contact</a>
            </div>
        </header>

        <!-- Section principale (Héros) -->
        <main class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="md:flex">
                <div class="md:w-1/2 p-8 md:p-12 flex flex-col justify-center">
                    <h2 class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight">Donner vie à vos idées, avec précision et ingéniosité.</h2>
                    <p class="mt-4 text-gray-600">De la conception 3D à la fabrication artisanale, je transforme vos concepts en réalité. Des solutions robustes, durables et conçues pour vos besoins.</p>
                    <div class="mt-8">
                        <a href="#" class="inline-block bg-blue-600 text-white font-bold rounded-lg px-6 py-3 hover:bg-blue-700 transition-colors duration-300 shadow-lg">Découvrir mes réalisations</a>
                    </div>
                </div>
                <!-- Conteneur pour la visualisation 3D -->
                <div id="3d-container" class="md:w-1/2 h-80 md:h-auto bg-gray-200 cursor-grab active:cursor-grabbing">
                    <!-- Le canvas Three.js sera injecté ici par le script -->
                    <div id="3d-overlay" class="absolute inset-0 flex items-center justify-center text-white text-center p-4 pointer-events-none fade-out bg-black bg-opacity-25">
                        <p class="text-lg font-semibold">Cliquez et glissez pour explorer</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Section des fonctionnalités -->
        <section class="mt-8 grid md:grid-cols-3 gap-8">
            <div class="bg-white rounded-xl shadow-md p-6 transform hover:-translate-y-1 transition-transform duration-300">
                <h3 class="text-xl font-bold text-gray-900">Conception 3D</h3>
                <p class="mt-2 text-gray-600">Modélisation précise pour visualiser et valider chaque détail avant la fabrication.</p>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 transform hover:-translate-y-1 transition-transform duration-300">
                <h3 class="text-xl font-bold text-gray-900">Fabrication sur mesure</h3>
                <p class="mt-2 text-gray-600">Utilisation de bois, métal et plastique pour créer des pièces uniques et fonctionnelles.</p>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6 transform hover:-translate-y-1 transition-transform duration-300">
                <h3 class="text-xl font-bold text-gray-900">Prototypage rapide</h3>
                <p class="mt-2 text-gray-600">Création de prototypes pour tester et itérer rapidement sur vos innovations.</p>
            </div>
        </section>

        <!-- Section Brainstorming IA -->
        <section id="brainstorm-section" class="mt-8 bg-white rounded-xl shadow-md p-6 md:p-8">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-gray-900">Besoin d'inspiration ?</h2>
                <p class="mt-2 text-gray-600">Décrivez un problème ou une idée, et laissez notre IA imaginer une solution sur mesure pour vous.</p>
            </div>
            <div class="mt-6 max-w-2xl mx-auto">
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="idea-input" placeholder="Ex: Un support élégant pour mon casque audio..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition w-full">
                    <button id="generate-button" class="bg-blue-600 text-white font-bold rounded-lg px-6 py-3 hover:bg-blue-700 transition-colors duration-300 shadow-lg flex items-center justify-center w-full sm:w-auto">
                        <span id="button-text" class="mr-2">✨ Générer une Idée</span>
                        <svg id="loading-spinner" class="animate-spin h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </button>
                </div>
                <div id="result-container" class="mt-6 bg-gray-50 p-6 rounded-lg border border-gray-200 min-h-[120px]">
                    <p class="text-gray-500 italic">Votre concept personnalisé apparaîtra ici...</p>
                </div>
            </div>
        </section>

        <!-- Pied de page -->
        <footer class="text-center mt-12 text-gray-500">
            <p>&copy; 2025 Monsieur Minutieux. Tous droits réservés.</p>
            <p class="text-sm">Conçu et développé avec soin.</p>
        </footer>

    </div>

    <script>
    // S'assurer que tout le script s'exécute après le chargement du DOM
    document.addEventListener('DOMContentLoaded', () => {

        // --- SECTION 1: FONCTIONNALITÉ DU MENU MOBILE ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- SECTION 2: FONCTIONNALITÉ DE GÉNÉRATION D'IDÉES PAR IA ---
        const generateButton = document.getElementById('generate-button');
        const ideaInput = document.getElementById('idea-input');
        const resultContainer = document.getElementById('result-container');
        const loadingSpinner = document.getElementById('loading-spinner');
        const buttonText = document.getElementById('button-text');

        generateButton.addEventListener('click', async () => {
            const userPrompt = ideaInput.value.trim();
            if (!userPrompt) {
                resultContainer.innerHTML = '<p class="text-red-500 font-semibold">Veuillez entrer une idée ou un problème à résoudre.</p>';
                return;
            }
            loadingSpinner.classList.remove('hidden');
            buttonText.textContent = 'Génération...';
            generateButton.disabled = true;
            resultContainer.innerHTML = '<p class="text-gray-500 animate-pulse">L\'ingéniosité est en marche, veuillez patienter...</p>';
            const fullPrompt = `Vous êtes Monsieur Minutieux, un expert en design et ingénierie sur mesure. Un client vous soumet l'idée ou le problème suivant : "${userPrompt}". Proposez un concept d'objet unique et sur mesure pour y répondre. Décrivez le concept, les matériaux potentiels (bois, métal, plastique) et une caractéristique de design marquante. Répondez en français, de manière créative et professionnelle. Formatez la réponse en HTML simple avec un titre en <h3>, des paragraphes en <p> et des listes à puces <ul><li> si nécessaire.`;
            try {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ parts: [{ text: fullPrompt }] }],
                    safetySettings: [
                        { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    ],
                };
                let response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`Erreur HTTP! Statut: ${response.status}`);
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    resultContainer.innerHTML = generatedText;
                } else {
                    resultContainer.innerHTML = '<p class="text-gray-600">L\'IA n\'a pas pu générer de réponse pour cette demande. Essayez de reformuler votre idée.</p>';
                }
            } catch (error) {
                console.error("Erreur lors de l'appel à l'API Gemini:", error);
                resultContainer.innerHTML = '<p class="text-red-500 font-semibold">Désolé, une erreur est survenue. Veuillez réessayer plus tard.</p>';
            } finally {
                loadingSpinner.classList.add('hidden');
                buttonText.textContent = '✨ Générer une Idée';
                generateButton.disabled = false;
            }
        });

        // --- SECTION 3: VISUALISATION 3D AVEC THREE.JS ---
        const container = document.getElementById('3d-container');
        if (!container) return;

        // 1. Initialisation de la scène, de la caméra et du moteur de rendu
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf0f0f0); // Fond de scène plus clair

        const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
        camera.position.set(2, 2, 4); // Position de caméra améliorée

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        // Activation des ombres
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // Ombres plus douces
        container.appendChild(renderer.domElement);

        // 2. Contrôles de la caméra (OrbitControls)
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 2;
        controls.maxDistance = 15;
        controls.target.set(0, 0.5, 0); // Cible la caméra légèrement plus haut

        // 3. Éclairage amélioré
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
        directionalLight.position.set(5, 10, 7.5);
        // Configuration de la lumière pour qu'elle projette des ombres
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 1024;
        directionalLight.shadow.mapSize.height = 1024;
        directionalLight.shadow.camera.near = 0.5;
        directionalLight.shadow.camera.far = 50;
        scene.add(directionalLight);
        
        // 4. Création d'un sol pour recevoir les ombres
        const groundGeometry = new THREE.PlaneGeometry(20, 20);
        const groundMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.8 });
        const ground = new THREE.Mesh(groundGeometry, groundMaterial);
        ground.rotation.x = -Math.PI / 2; // Orienter le plan à l'horizontale
        ground.receiveShadow = true; // Le sol reçoit les ombres
        scene.add(ground);

        // 5. Création des objets 3D avec ombres
        const objects = [];

        // Objet "Bois" (Cube aplati)
        const woodGeometry = new THREE.BoxGeometry(1.5, 0.2, 1);
        const woodMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513, roughness: 0.8, metalness: 0.1 });
        const woodCube = new THREE.Mesh(woodGeometry, woodMaterial);
        woodCube.position.set(-1.5, 0.6, 0);
        woodCube.castShadow = true;
        woodCube.receiveShadow = true;
        scene.add(woodCube);
        objects.push(woodCube);

        // Objet "Métal" (TorusKnot - forme plus complexe)
        const metalGeometry = new THREE.TorusKnotGeometry(0.5, 0.15, 100, 16);
        const metalMaterial = new THREE.MeshStandardMaterial({ color: 0xaaa9ad, roughness: 0.2, metalness: 0.9 });
        const metalKnot = new THREE.Mesh(metalGeometry, metalMaterial);
        metalKnot.position.set(0, 1, 0);
        metalKnot.castShadow = true;
        metalKnot.receiveShadow = true;
        scene.add(metalKnot);
        objects.push(metalKnot);

        // Objet "Plastique" (Sphère)
        const plasticGeometry = new THREE.SphereGeometry(0.6, 32, 32);
        const plasticMaterial = new THREE.MeshStandardMaterial({ color: 0x0077be, roughness: 0.4, metalness: 0.2 });
        const plasticSphere = new THREE.Mesh(plasticGeometry, plasticMaterial);
        plasticSphere.position.set(1.5, 0.6, 0);
        plasticSphere.castShadow = true;
        plasticSphere.receiveShadow = true;
        scene.add(plasticSphere);
        objects.push(plasticSphere);

        // 6. Boucle d'animation
        function animate() {
            requestAnimationFrame(animate);
            // Animation subtile des objets
            const time = Date.now() * 0.0005;
            metalKnot.rotation.y = time;
            woodCube.rotation.y = time * 0.5;
            plasticSphere.position.y = 0.6 + Math.sin(time * 2) * 0.1;

            controls.update();
            renderer.render(scene, camera);
        }

        // 7. Gestion du redimensionnement
        function onWindowResize() {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }
        window.addEventListener('resize', onWindowResize);

        animate();
    });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil - Monsieur Minutieux</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- Three.js library for 3D visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- OrbitControls for interactive camera movement -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Assurer que le canvas 3D remplit son conteneur */
        #3d-container canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Conteneur principal -->
    <div class="container mx-auto p-4 md:p-8">

        <!-- En-tête -->
        <header class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl md:text-4xl font-black text-gray-900">Monsieur Minutieux</h1>
                    <p class="text-gray-500">Créations sur mesure | Ingénierie & Design</p>
                </div>
                <nav class="hidden md:block">
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md">Projets</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md">Services</a>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium px-3 py-2 rounded-md">Contact</a>
                </nav>
                <div class="md:hidden">
                    <button class="text-gray-900 focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Section principale (Héros) -->
        <main class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="md:flex">
                <div class="md:w-1/2 p-8 md:p-12 flex flex-col justify-center">
                    <h2 class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight">Donner vie à vos idées, avec précision et ingéniosité.</h2>
                    <p class="mt-4 text-gray-600">De la conception 3D à la fabrication artisanale, je transforme vos concepts en réalité. Des solutions robustes, durables et conçues pour vos besoins.</p>
                    <div class="mt-8">
                        <a href="#" class="inline-block bg-blue-600 text-white font-bold rounded-lg px-6 py-3 hover:bg-blue-700 transition-colors duration-300 shadow-lg">Découvrir mes réalisations</a>
                    </div>
                </div>
                <!-- Conteneur pour la visualisation 3D -->
                <div id="3d-container" class="md:w-1/2 h-80 md:h-auto bg-gray-900 cursor-grab active:cursor-grabbing">
                    <!-- Le canvas Three.js sera injecté ici par le script -->
                </div>
            </div>
        </main>

        <!-- Section des fonctionnalités -->
        <section class="mt-8 grid md:grid-cols-3 gap-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-900">Conception 3D</h3>
                <p class="mt-2 text-gray-600">Modélisation précise pour visualiser et valider chaque détail avant la fabrication.</p>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-900">Fabrication sur mesure</h3>
                <p class="mt-2 text-gray-600">Utilisation de bois, métal et plastique pour créer des pièces uniques et fonctionnelles.</p>
            </div>
            <div class="bg-white rounded-xl shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-900">Prototypage rapide</h3>
                <p class="mt-2 text-gray-600">Création de prototypes pour tester et itérer rapidement sur vos innovations.</p>
            </div>
        </section>

        <!-- Section Brainstorming IA -->
        <section id="brainstorm-section" class="mt-8 bg-white rounded-xl shadow-md p-6 md:p-8">
            <div class="text-center">
                <h2 class="text-3xl font-bold text-gray-900">Besoin d'inspiration ?</h2>
                <p class="mt-2 text-gray-600">Décrivez un problème ou une idée, et laissez notre IA imaginer une solution sur mesure pour vous.</p>
            </div>
            <div class="mt-6 max-w-2xl mx-auto">
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="idea-input" placeholder="Ex: Un support élégant pour mon casque audio..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none transition w-full">
                    <button id="generate-button" class="bg-blue-600 text-white font-bold rounded-lg px-6 py-3 hover:bg-blue-700 transition-colors duration-300 shadow-lg flex items-center justify-center w-full sm:w-auto">
                        <span id="button-text" class="mr-2">✨ Générer une Idée</span>
                        <svg id="loading-spinner" class="animate-spin h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </button>
                </div>
                <div id="result-container" class="mt-6 bg-gray-50 p-6 rounded-lg border border-gray-200 min-h-[120px]">
                    <p class="text-gray-500 italic">Votre concept personnalisé apparaîtra ici...</p>
                </div>
            </div>
        </section>

        <!-- Pied de page -->
        <footer class="text-center mt-12 text-gray-500">
            <p>&copy; 2025 Monsieur Minutieux. Tous droits réservés.</p>
            <p class="text-sm">Conçu et développé avec soin.</p>
        </footer>

    </div>

    <script>
        // --- Script pour la fonctionnalité de génération d'idées par IA ---
        const generateButton = document.getElementById('generate-button');
        // ... (le reste du script de l'IA reste inchangé) ...
        const ideaInput = document.getElementById('idea-input');
        const resultContainer = document.getElementById('result-container');
        const loadingSpinner = document.getElementById('loading-spinner');
        const buttonText = document.getElementById('button-text');

        generateButton.addEventListener('click', async () => {
            const userPrompt = ideaInput.value.trim();
            if (!userPrompt) {
                resultContainer.innerHTML = '<p class="text-red-500 font-semibold">Veuillez entrer une idée ou un problème à résoudre.</p>';
                return;
            }
            loadingSpinner.classList.remove('hidden');
            buttonText.textContent = 'Génération...';
            generateButton.disabled = true;
            resultContainer.innerHTML = '<p class="text-gray-500 animate-pulse">L\'ingéniosité est en marche, veuillez patienter...</p>';
            const fullPrompt = `Vous êtes Monsieur Minutieux, un expert en design et ingénierie sur mesure. Un client vous soumet l'idée ou le problème suivant : "${userPrompt}". Proposez un concept d'objet unique et sur mesure pour y répondre. Décrivez le concept, les matériaux potentiels (bois, métal, plastique) et une caractéristique de design marquante. Répondez en français, de manière créative et professionnelle. Formatez la réponse en HTML simple avec un titre en <h3>, des paragraphes en <p> et des listes à puces <ul><li> si nécessaire.`;
            try {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ parts: [{ text: fullPrompt }] }],
                    safetySettings: [
                        { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    ],
                };
                let response;
                let attempts = 0;
                const maxAttempts = 5;
                let delay = 1000;
                while (attempts < maxAttempts) {
                    try {
                        response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (response.ok) break;
                        if (response.status === 429 || response.status >= 500) {
                           attempts++;
                           if (attempts >= maxAttempts) throw new Error(`Échec de la requête API après ${maxAttempts} tentatives avec le statut : ${response.status}`);
                           await new Promise(resolve => setTimeout(resolve, delay));
                           delay *= 2;
                        } else {
                           throw new Error(`Erreur client, la requête ne sera pas relancée. Statut : ${response.status}`);
                        }
                    } catch (error) {
                        attempts++;
                        if (attempts >= maxAttempts) throw error;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                    }
                }
                if (!response.ok) throw new Error(`Erreur HTTP! Statut: ${response.status}`);
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0) {
                    const generatedText = result.candidates[0].content.parts[0].text;
                    resultContainer.innerHTML = generatedText;
                } else {
                    resultContainer.innerHTML = '<p class="text-gray-600">L\'IA n\'a pas pu générer de réponse pour cette demande. Essayez de reformuler votre idée.</p>';
                }
            } catch (error) {
                console.error("Erreur lors de l'appel à l'API Gemini:", error);
                resultContainer.innerHTML = '<p class="text-red-500 font-semibold">Désolé, une erreur est survenue. Le service est peut-être momentanément indisponible. Veuillez réessayer plus tard.</p>';
            } finally {
                loadingSpinner.classList.add('hidden');
                buttonText.textContent = '✨ Générer une Idée';
                generateButton.disabled = false;
            }
        });
    </script>

    <script>
        // --- Script pour la visualisation 3D avec Three.js ---
        
        // S'assurer que le script s'exécute après le chargement du DOM
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('3d-container');
            if (!container) return;

            // 1. Initialisation de la scène, de la caméra et du moteur de rendu
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 5;

            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            // 2. Ajout des contrôles de la caméra (OrbitControls)
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; // Effet d'inertie
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = false;
            controls.minDistance = 2;
            controls.maxDistance = 10;

            // 3. Ajout de l'éclairage
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 7.5);
            scene.add(directionalLight);

            // 4. Création des objets 3D (exemples de matériaux)
            const objects = [];

            // Objet "Bois" (Cube)
            const woodGeometry = new THREE.BoxGeometry(1, 1, 1);
            const woodMaterial = new THREE.MeshStandardMaterial({ color: 0x8B4513, roughness: 0.8, metalness: 0.1 });
            const woodCube = new THREE.Mesh(woodGeometry, woodMaterial);
            woodCube.position.x = -2;
            scene.add(woodCube);
            objects.push(woodCube);

            // Objet "Métal" (Cylindre)
            const metalGeometry = new THREE.CylinderGeometry(0.5, 0.5, 1.5, 32);
            const metalMaterial = new THREE.MeshStandardMaterial({ color: 0xaaa9ad, roughness: 0.2, metalness: 0.9 });
            const metalCylinder = new THREE.Mesh(metalGeometry, metalMaterial);
            scene.add(metalCylinder);
            objects.push(metalCylinder);

            // Objet "Plastique" (Sphère)
            const plasticGeometry = new THREE.SphereGeometry(0.6, 32, 32);
            const plasticMaterial = new THREE.MeshStandardMaterial({ color: 0x0077be, roughness: 0.4, metalness: 0.2 });
            const plasticSphere = new THREE.Mesh(plasticGeometry, plasticMaterial);
            plasticSphere.position.x = 2;
            scene.add(plasticSphere);
            objects.push(plasticSphere);

            // 5. Boucle d'animation
            function animate() {
                requestAnimationFrame(animate);

                // Animation des objets
                objects.forEach(obj => {
                    obj.rotation.x += 0.005;
                    obj.rotation.y += 0.005;
                });

                controls.update(); // Mettre à jour les contrôles
                renderer.render(scene, camera);
            }

            // 6. Gestion du redimensionnement de la fenêtre
            function onWindowResize() {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            }
            window.addEventListener('resize', onWindowResize);

            // Démarrer l'animation
            animate();
        });
    </script>
</body>
</html>
